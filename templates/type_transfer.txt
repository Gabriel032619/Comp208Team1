<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://fonts.googleapis.com/css2?family=Arimo&display=swap" rel="stylesheet">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Main Page</title>
<style>
    body {
    font-family: 'Arimo', sans-serif;
}

    .text{
        position:absolute;
        top:-60px;
        left:26%;
        z-index: 2;
        width: 70%;
        height: auto;
    }
    .logo{
            width: 40px; /* 设置logo宽度 */
            height: auto; /* 高度自适应 */
            margin-right: 10px; /* 调整logo和名称之间的间距 */
        }
        .logo-container {
            position: absolute;
            top: 60px;
            left: 30px;
            z-index: 1; /* 确保logo在背景上方 */
        }
        .name{
            position: absolute;
            top: 65px;
            left: 80px;
            z-index: 1; /* 确保logo在背景上方 */
            width: 140px;
        }
        .left-side-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 18%; /* 页面宽度的20% */
        height: 90vh; /* 视窗的高度 */
        background-color: #dbc9c5; /* 棕色背景 */
        z-index: 0; /* 确保这个背景在其他内容之下 */
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 80px; /* Adjust padding as needed */
    }
        .dashboard-menu {
        padding-top: 100px;
        display: flex;
        flex-direction: column;
        width: 100%; /* Use full width of the parent */
        align-items: center;
        }

        .dashboard-item {
            font-weight: bold;
            color: white; /* Adjust text color as needed */
            text-decoration: none;
            padding: 10px 0; /* Adjust padding as needed */
            width: 100%;
            text-align: center;
            font-size: 1.5em; /* Adjust font size as needed */
            border-bottom: 1px solid #ffffff30; /* Optional separator */
            padding-top: 15px; /* 增加顶部外边距 */
            padding-bottom: 15px; /* 增加底部外边距 */
        }

        .dashboard-item:hover {
            background-color: #ffffff20; /* Optional hover effect */
        }

        .dashboard-item.active {
    background-color: #b09b96; /* 深棕色背景 */
    color: #FFFFFF; /* 白色文字 */
    font-weight: bold; /* 加粗字体 */
}


    .right-side-background {
        position: absolute;
        top: 0;
        left: 18%; /* 从页面宽度的50%开始 */
        width: 82%; /* 页面剩余宽度 */
        height: 100vh; /* 视窗的高度 */
        background-color: #f7f7f7; /* 设置背景色 */
        z-index: 1; /* 确保这个背景在其他内容之下 */
    }
    .blank1 {
    position: absolute;
    line-height: 1.5;
    font-size: large;
    right: 20px;
    width: 20%;
    height: calc((80vh - 270px) / 3 - 10px); /* 分配高度并留出间隙 */
    border-radius: 8px;
    background-color: white;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    z-index: 2;
    padding: 20px;
    box-sizing: border-box;
    margin-bottom: 10px; /* 为方框之间添加间隙 */
}

/* 为每个方框设置不同的top值以使它们垂直排列 */
.box1 { top: 180px; }
.box2 { top: calc(130px + (100vh - 270px) / 3 + 10px); } /* 在第一个方框的高度基础上增加高度和间隙 */
.box3 { top: calc(80px + 2 * ((100vh - 270px) / 3 + 10px)); } /* 在第二个方框的高度基础上再增加 */

.logout-link {
    position: absolute; /* 绝对定位 */
    width:70px;
    padding: 10px 0;
    bottom: 30px; /* 将按钮向下移动 */
    right: 50px;
    z-index: 2;
    height: 20px;
    background-color: #4F312A;
    color: #FFFFFF; /* 设置字体颜色为白色 */
    border-radius: 35px; /* 圆角边框，增加按钮的圆润感 */
    font-weight: bold;
    font-size: 15px; /* 增大字体大小 */
    text-decoration: none; /* 移除下划线 */
    cursor: pointer;
    text-align: center;
    line-height: 20px;
    transition: all 0.3s ease; /* 平滑的过渡效果 */
    }

    .logout-link:hover {
        background: linear-gradient(145deg, #b09b96, #b96955); /* 鼠标悬停时改变渐变方向 */
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); /* 悬停时增加阴影的模糊度和扩散范围 */
        transform: translateY(1px);
    }

.blank2{
        position:absolute;
        top:180px;
        right:335px;
        width:30%;
        height: calc(107.4vh - 270px); /* 减去顶部的偏移量 */
        border-radius: 8px;
        background-color: white; /* 白色背景 */
        z-index: 2; /* 确保它显示在右侧背景之上 */
        padding: 20px;/*元素边框与其内部内容之间的空间*/
        box-sizing: border-box; /* 保证内边距不影响元素的总宽度和高度 */
        text-align: center;
}
    .lightlogo{
        width:21%;
        padding-left: 0;
        padding-top: 40%;
    }

    .tap-text {
    /*display: inline-block; !* 使元素像块级元素一样显示，但允许设置宽度 *!*/
    /*margin-top: 200px; !* 在元素上方添加更多空间 *!*/
    /*margin-left: auto;*/
    /*margin-right: auto;*/
    /*background-color: #4F312A;*/
    /*color: #FFFFFF; !* 设置字体颜色为白色 *!*/
    /*padding: 12px 25px; !* 文字周围的内边距 *!*/
    /*border-radius: 20px; !* 圆角边框，增加按钮的圆润感 *!*/
    /*font-weight: bold;*/
    /*font-size: 18px; !* 增大字体大小 *!*/
    /*text-decoration: none; !* 移除下划线 *!*/
    /*cursor: pointer;*/
    /*box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); !* 添加细微的阴影，增加层次感 *!*/
    /*transition: all 0.3s ease; !* 平滑的过渡效果 *!*/
    display: inline-block; /* 确保按钮像块级元素一样显示，但允许设置宽度 */
    margin: 20px auto; /* 调整上下外边距为 20px，水平居中 */
    padding: 12px 25px; /* 文字周围的内边距 */
    font-size: 18px; /* 字体大小 */
    color: #FFFFFF; /* 字体颜色 */
    background-color: #4F312A; /* 背景颜色 */
    border: none; /* 移除边框 */
    border-radius: 20px; /* 圆角边框 */
    cursor: pointer; /* 鼠标悬停时显示指针 */
    text-align: center; /* 文本居中 */
    text-decoration: none; /* 移除下划线 */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* 添加细微的阴影 */
    transition: background-color 0.3s ease; /* 平滑的背景颜色过渡 */
    }

    .tap-text:hover {
        background: linear-gradient(145deg, #b09b96, #b96955); /* 鼠标悬停时改变渐变方向 */
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); /* 悬停时增加阴影的模糊度和扩散范围 */
        transform: translateY(1px); /* 轻微上移，增加点击反馈 */
    }


    #newButton {
        display: block; /* 使按钮像块级元素一样显示 */
        margin: 20px auto; /* 上下间距为 20px，水平居中 */
        padding: 10px 20px; /* 文字周围的内边距 */
        font-size: 16px; /* 字体大小 */
        color: #4F312A; /* 字体颜色为白色 */
        background: #FFFFFF; /* 背景颜色 */
        border: none; /* 无边框 */
        border-radius: 5px; /* 圆角边框 */
        cursor: pointer; /* 鼠标悬停时显示指针 */
        font-weight: bold;
    }

    .tap-text.disabled {
    pointer-events: none; /* 禁止鼠标事件 */
    opacity: 0.5; /* 半透明显示，表示不可用 */
}


.blank3{
        position:absolute;
        top:180px;
        right:800px;
        width: 350px;
        height: calc(100vh - 530px); /* 减去顶部的偏移量 */
        border-radius: 8px;
        background-color: white; /* 白色背景 */
        background-size: 30%;
        background-repeat: no-repeat;
        background-position: right 125px bottom 130px; /* 自定义背景图片位置 */

        z-index: 2; /* 确保它显示在右侧背景之上 */
        padding: 20px;/*元素边框与其内部内容之间的空间*/
        box-sizing: border-box; /* 保证内边距不影响元素的总宽度和高度 */
}
.blank4{
        position:absolute;
        top:500px;
        right:800px;
        width: 350px;
        height: calc(100vh - 530px); /* 减去顶部的偏移量 */
        border-radius: 8px;
        background-color: white; /* 白色背景 */
        z-index: 2; /* 确保它显示在右侧背景之上 */
        padding: 20px;/*元素边框与其内部内容之间的空间*/
        box-sizing: border-box; /* 保证内边距不影响元素的总宽度和高度 */
        background-image: url("../static/lightlogo.png");
        background-size: 30%;
        background-repeat: no-repeat;
        background-position: right 125px bottom 130px; /* 自定义背景图片位置 */
}
    .load{
        width: 40%;
        height: auto;
        padding-top: 35px;
        padding-left: 30%;
    }
/* 改变上传标签的样式 */
label {
    display: block; /* 使标签占据整行 */
    padding-top: 5px; /* 在标签上方添加一些空间 */
    font-size: 16px; /* 设置字体大小 */
    line-height: 1.5; /* 设置行间距 */
    text-align: center; /* 设置文本居中 */
    cursor: pointer; /* 鼠标悬停时显示指针，表明这是一个可点击的项目 */
    color:#4F312A;
}

/* 改变上传输入框的样式 */
input[type="file"] {
    width: 100%; /* 输入框占据整个容器宽度 */
    margin: 5px 0; /* 在输入框的上下添加一些空间 */
    padding: 15px; /* 在输入框内部添加一些空间 */
    padding-left:30%;
}

/* 针对特定的blank3和blank4容器内的标签添加样式 */
.blank3 label, .blank4 label {
    font-weight: bold; /* 仅将blank3和blank4内的标签文字加粗 */
}

.dim {
    filter: brightness(95%); /* 使背景变暗，数值可以根据需要调整 */
}

.finish {
    display: inline; /* 确保文本是可见的 */
    font-size: 20px; /* 增大字体大小 */
    color: #FF0000; /* 设置字体颜色为红色 */
    font-weight: bold; /* 加粗字体 */
    font-family: 'Arial', sans-serif; /* 改变字体，这里使用了 Arial */
    filter: brightness(200%); /* 将亮度调回正常，数值需要根据 .dim 类中的brightness值进行调整 */
}


</style>
</head>
<script>
    window.onload = function() {
        document.getElementById("styleImage").addEventListener("change", function() {
            // 上传风格图后的操作
            var box1 = document.querySelector(".box1");
            box1.querySelector(".finish").style.display = "inline"; // 显示 "Finish"
            box1.classList.add("dim"); // 方框变暗
        });

        document.getElementById("contentImage").addEventListener("change", function() {
            // 上传原图后的操作
            var box2 = document.querySelector(".box2");
            box2.querySelector(".finish").style.display = "inline"; // 显示 "Finish"
            box2.classList.add("dim"); // 方框变暗
        });
    }
</script>

<script>
 document.addEventListener("DOMContentLoaded", function() {
    var tapText = document.getElementById("tapText");
    var imageContainer = document.getElementById("imageContainer");
    var dynamicImage = document.getElementById("dynamicImage");
    var newButton = document.getElementById("newButton");

    tapText.addEventListener("click", function() {
        // 设置新图片的路径
        dynamicImage.src = "img/example.png"; // 替换为新图片的路径
        dynamicImage.alt = "New Image";
        // 显示图片
        imageContainer.style.display = "block";
        // 显示新按钮
        newButton.style.display = "block";
    });
});
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
    var styleInput = document.getElementById("styleImage");
    var stylePreview = document.getElementById("stylePreview");
    var contentInput = document.getElementById("contentImage");
    var contentPreview = document.getElementById("contentPreview");

    styleInput.addEventListener("change", function(event) {
        var file = event.target.files[0];
        if (file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                stylePreview.src = e.target.result;
                stylePreview.style.display = "block";
            };
            reader.readAsDataURL(file);
        }
    });

    contentInput.addEventListener("change", function(event) {
        var file = event.target.files[0];
        if (file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                contentPreview.src = e.target.result;
                contentPreview.style.display = "block";
            };
            reader.readAsDataURL(file);
        }
    });
});

</script>

<script>
   // 初始化两个变量来跟踪图片是否上传
var styleImageUploaded = false;
var contentImageUploaded = false;

document.addEventListener("DOMContentLoaded", function() {
    var tapText = document.getElementById("tapText");
    var imageContainer = document.getElementById("imageContainer");
    var dynamicImage = document.getElementById("dynamicImage");
    var newButton = document.getElementById("newButton");

    // 当风格图片上传时更新状态
    document.getElementById("styleImage").addEventListener("change", function() {
        if (this.files.length > 0) {
            styleImageUploaded = true;
            checkBothImagesUploaded();
        }
    });

    // 当内容图片上传时更新状态
    document.getElementById("contentImage").addEventListener("change", function() {
        if (this.files.length > 0) {
            contentImageUploaded = true;
            checkBothImagesUploaded();
        }
    });

    // 检查两张图片是否都上传了
    function checkBothImagesUploaded() {
        if (styleImageUploaded && contentImageUploaded) {
            // 使 "Click here" 按钮可点击
            tapText.classList.remove("disabled");
        }
    }

    tapText.addEventListener("click", function() {
        if (!tapText.classList.contains("disabled")) {
            // 设置新图片的路径
            dynamicImage.src = "img/example.png"; // 替换为新图片的路径
            dynamicImage.alt = "New Image";
            // 显示图片
            imageContainer.style.display = "block";
            // 显示新按钮
            newButton.style.display = "block";
        }
    });
});
</script>

<body>
    <div class="left-side-background">
        <div class="dashboard-menu">
            <a href="/login/main_page" class="dashboard-item">Dashboard</a>
            <a href="/login/main_page/transfer" class="dashboard-item active">Style Transfer</a>
            <a href="/login/main_page/strength" class="dashboard-item">Image Enhancement</a>
        </div>
    </div>

    <div class="right-side-background"></div>
    <div class="blank1 box1">
        <strong>Step 1: </strong>Upload the style image you want
        <span class="finish" style="display: none;">Finish</span></div>

    <div class="blank1 box2">
        <strong>Step 2: </strong>upload the image you want to apply the style on
        <span class="finish" style="display: none;">Finish</span></div>

    <div class="blank1 box3"><strong>Step 3: </strong>Done !</div>
    <div class="logout-button">
        <a id="Logout" class="logout-link" href="/">Log out</a>
    </div>
<form method="POST" action="/login/main_page/transfer" enctype="multipart/form-data" id="Form">
    <div class="blank2">


        {% if img_path %}
{#        <div id="imageContainer" style="display: none; text-align: center;">#}
           <img id="r_image"  alt="Result Image"src="{{ url_for('static', filename=img_path) }}"
                 style="position: absolute; top: 40%; left: 50%; max-width: 80%; height: auto;max-height: 40%;
                 transform: translate(-50%, -50%);box-shadow: 0 5px 10px
                 rgba(0, 0, 0, 2);"/>
{#        </div>#}
{#            <img src="{{ url_for('static', filename=img_path) }}" alt="Result img">#}
        {% endif %}
        <img src="{{ url_for('static', filename='lightlogo.png') }}" alt="Lightlogo" class="lightlogo">
        <button type="submit" id="tapText" name="tapText" class="tap-text disabled">Click here to transfer your picture!</button>
        {% if img_path %}
{#        <a href="/login/main_page/transfer" id="newButton" class="button-style" style="display: none;">Try it again!</a>#}
        <a href="/login/main_page/transfer" id="newButton" class="button-style">Try it again!</a>
        {% endif %}
    </div>

    <div class="blank3">
        <img src="{{ url_for('static', filename='load.png') }}" alt="Load" class="load" id="stylePreview" style=" max-width: 40%; max-height:50%; height: auto; width:auto; padding-top: 35px; padding-left: 30%;"/>
        <input type="file" id="styleImage" name="styleImage"/><label for="styleImage">Upload your style image</label>
    </div>

    <div class="blank4">
        <img src="{{ url_for('static', filename='load.png') }}" alt="Load" class="load" id="contentPreview" style=" max-width: 40%; max-height:50%; height: auto; padding-top: 35px; width:auto; padding-left: 30%;"/>
        <input type="file" id="contentImage" name="contentImage"/><label for="contentImage">Upload your content image</label>
    </div>
</form>
    <div class="header">
        <div class="logo-container">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
        </div>
        <div class="name-container">
            <img src="{{ url_for('static', filename='Name.png') }}" alt="Name" class="name">
        </div>
        <div class="top-text">
            <img src="{{ url_for('static', filename='title-st.png') }}" alt="Text" class="text">
        </div>
    </div>

</body>
</html>